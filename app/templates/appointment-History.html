{% extends 'base.html' %} {% block title %} Doctor {{ translate('Dashboard') }}
{% endblock %} {% block body %}

<!-- Breadcrumb -->
<div class="breadcrumb-bar">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-md-12 col-12">
        <nav aria-label="breadcrumb" class="page-breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index-2.html">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">
              Dashboard
            </li>
          </ol>
        </nav>
        <h2 class="breadcrumb-title">Dashboard</h2>
      </div>
    </div>
  </div>
</div>
<!-- /Breadcrumb -->

<!-- Page Content -->
<div class="content">
  <div class="container-fluid">
    <div class="row">
      <!-- Profile Sidebar -->
      <div class="col-md-5 col-lg-4 col-xl-3 theiaStickySidebar">
        {% block sidebar %} {% include 'base-patient-side.html' %} {% endblock %}
      </div>
      <!-- / Profile Sidebar -->
      <div class="col-md-7 col-lg-8 col-xl-9 dct-appoinment">
        <div class="card">
            <div class="card-body pt-0">
                <div class="user-tabs">
                    <ul class="nav nav-tabs nav-tabs-bottom nav-justified flex-wrap">
                        <li class="nav-item">
                            <a class="nav-link active" href="#pat_appointments" data-toggle="tab">Appointments</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#pres" data-toggle="tab"><span>Prescription</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#medical" data-toggle="tab"><span class="med-records">Medical Records</span></a>
                        </li>
                    </ul>
                </div>
                <div class="tab-content">
                    
                    <!-- Appointment Tab -->
                    <div id="pat_appointments" class="tab-pane fade show active">
                        <div class="card card-table mb-0">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover table-center mb-0">
                                        <thead>
                                            <tr>
                                                <th>Doctor</th>
                                                <th>Appt Date</th>
                                                <th>Amount</th>
                                                <th>Follow Up</th>
                                                <th>Status</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for appointment in appointments %}
                                            <tr>
                                                <td>
                                                    <h2 class="table-avatar">
                                                        <a href="doctor-profile.html" class="avatar avatar-sm mr-2">
                                                            <img class="avatar-img rounded-circle" src="{{ appointment.doctor_photo }}" alt="User Image">
                                                        </a>
                                                        <a href="doctor-profile.html">{{ appointment.doctor_name }} <span>{{ appointment.doctor_specialization }}</span></a>
                                                    </h2>
                                                </td>
                                                <td>{{ appointment.date }} <span class="d-block text-info">{{ appointment.time_range }}</span></td>
                                                <td>${{ appointment.price }}</td>
                                                <td>12 Nov 2019</td>
                                                <td>
                                                    {% if appointment.is_cancelled %}
                                                        <span class="badge badge-pill bg-danger position-relative d-inline">Cancelled</span>
                                                    {% elif appointment.is_pending %}
                                                        <span class="badge badge-pill bg-info position-relative d-inline">Pending</span>
                                                    {% elif appointment.is_confirmed %}
                                                        <span class="badge badge-pill bg-success position-relative d-inline">Confirmed</span>
                                                    {% else %}
                                                        <span class="badge badge-pill bg-secondary position-relative d-inline">{{ appointment.status }}</span>
                                                    {% endif %}
                                                </td>                                               
                                                 <td class="text-right">
                                                    <div class="table-action">
                                                        <a href="edit-prescription.html" class="btn btn-sm bg-success-light">
                                                            <i class="far fa-edit"></i> Edit
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% endfor %}

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Appointment Tab -->
                    
                    <!-- Prescription Tab -->
                    <div class="tab-pane fade" id="pres">
                        <div class="text-right">
                            <a href="add-prescription.html" class="add-new-btn">Add Prescription</a>
                        </div>
                        <div class="card card-table mb-0">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover table-center mb-0">
                                        <thead>
                                            <tr>
                                                <th>Days </th>
                                                <th>Name</th>									
                                                <th>Quantity</th>
                                                <th>Time of Day</th>
                                            </tr>     
                                        </thead>
                                        <tbody>
                                            {% for medicine in medicine_data %}
                                            <tr>
                                                <td>{{ medicine.days }}</td>
                                                <td>{{ medicine.name }}</td>
                                                <td>{{ medicine.quantity }}</td>
                                                <td>{{ medicine.time_of_day }}</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>	
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Prescription Tab -->

                    <!-- Medical Records Tab -->
                    <div class="tab-pane fade" id="medical">
                        <div class="text-right">		
                            <a href="#" class="add-new-btn" data-toggle="modal" data-target="#add_medical_records">Add Medical Records</a>
                        </div>
                        <div class="card card-table mb-0">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover table-center mb-0">
                                        <thead>
                                            <tr>
                                                <th>ID Doctor</th>
                                                <th>Time </th>
                                                <th>diagnosis</th>
                                                <th>date appioment</th>
                                                <th>Created by</th>
                                                <th></th>
                                            </tr>     
                                        </thead>
                                        <tbody>
                                            <tr>
                                                {% for record in medical_records %}
													<tr>
														<td>#{{ record.doctor_idnum }}</td>
														<td>{{ record.booking_time }}</td>
														<td>{{ record.diagnosis }}</td>
														<td>{{ record.appointment_date }}</td>
														<td>
															<h2 class="table-avatar">
																<a href="javascript:void(0);" class="avatar avatar-sm mr-2">
																	<img class="avatar-img rounded-circle" src="{{ record.doctor_photo }}" alt="User Image">
																</a>
																<a href="doctor-profile.html">{{ record.doctor_name }} <span>{{ record.doctor_specialization }}</span></a>
															</h2>
														</td>
														<td class="text-right">
															<div class="table-action">
																
																{% if record.report_url %}
																<a href="{{ url_for('static', filename='reports/' + record.report_url) }}" class="btn btn-sm bg-primary-light" download>
																	<i class="fas fa-print"></i> Print
																</a>
															{% else %}
																<span class="text-muted">No Report Available</span>
															{% endif %}
															</div>
														</td>
													</tr>
													{% endfor %}
                                            </tr>
                                        </tbody>  	
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Medical Records Tab -->     
                </div>
            </div>
        </div>
    </div>
     
    </div>
  </div>
</div>
<!-- Modal for rescheduling appointments -->
<div id="reschedule-modal" style="display:none;">
    <!-- Modal content will be loaded dynamically -->
</div>


<!-- /Page Content -->
{% endblock %}
