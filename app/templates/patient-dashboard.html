{% extends 'base.html' %} {% block title %} Doctor {{ translate('Dashboard') }}
{% endblock %} {% block body %}

<!-- Breadcrumb -->
<div class="breadcrumb-bar">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-md-12 col-12">
        <nav aria-label="breadcrumb" class="page-breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index-2.html">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">
              Dashboard
            </li>
          </ol>
        </nav>
        <h2 class="breadcrumb-title">Dashboard</h2>
      </div>
    </div>
  </div>
</div>
<!-- /Breadcrumb -->

<!-- Page Content -->
<div class="content">
  <div class="container-fluid">
    <div class="row">
      <!-- Profile Sidebar -->
      <div class="col-md-5 col-lg-4 col-xl-3 theiaStickySidebar">
        
        <div class="profile-sidebar">
          <div class="widget-profile pro-widget-content">
            <div class="profile-info-widget">
              <a href="#" class="booking-doc-img">
                <img src="{{ patient.photo }}" alt="User Photo">
              </a>
              <div class="profile-det-info">
                <h4>Welcome {{ user_name }}!</h4>
                <div class="patient-details">
                  <h5>
                    <i class="far fa-envelope-open"></i> {{ patient.email }}
                  </h5>
                  <h5 class="mb-0">
                    <span class="{{ 'activated' if patient.activated else 'not-activated' }}">
                      {{ 'Activated' if patient.activated else 'Not Activated' }}
                  </span>
                  </h5>
                </div>
              </div>
            </div>
          </div>
          <div class="dashboard-widget">
            <nav class="dashboard-menu">
              <ul>
                <li class="active">
                  <a href="patient-dashboard.html">
                    <i class="fas fa-columns"></i>
                    <span>Dashboard</span>
                  </a>
                </li>
                <li>
                  <a href="favourites.html">
                    <i class="fas fa-bookmark"></i>
                    <span>Favourites</span>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <i class="fas fa-comments"></i>
                    <span>Message</span>
                    <small class="unread-msg">23</small>
                  </a>
                </li>
                <li>
                  <a href="{{ url_for('patient_setting') }}">
                    <i class="fas fa-user-cog"></i>
                    <span>Profile Settings</span>
                  </a>
                </li>
                <li>
                  <a href="change-password.html">
                    <i class="fas fa-lock"></i>
                    <span>Change Password</span>
                  </a>
                </li>
                <li>
                  <a href="index-2.html">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <!-- / Profile Sidebar -->

      <div class="col-md-7 col-lg-8 col-xl-9">
       <div class="row">
        <div class="col-md-7 col-lg-8 col-xl-5">
          <h3>Next appointment</h3>
          <div class="Next-appointment-card">
            <div>
              {% if appointment %}
              <h2>{{ appointment.date }}</h2>
              <p><i class="far fa-clock"></i> {{ appointment.time_range }} - {{ appointment.duration }}</p>
              <p><i class="fas fa-map-marker-alt"></i> {{ appointment.clinic_address }}</p>
              <div class="d-flex">
                <img class="bor" src="{{ appointment.doctor_photo }}" alt="Doctor Photo" width="100">
                <div>
                  <p>{{ appointment.doctor_name }}</p>
                  <p>{{ appointment.doctor_specialization }}</p>

                </div>
              </div>
              {% else %}
                <p>No upcoming appointments.</p>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="col-md-7 col-lg-8 col-xl-5">
          <h3>Report</h3>
          {% for appointment in past_appointments %}
          <div class="Report-appointment-card d-flex">
            <div class="w-75">
              <p>Doctor: {{ appointment.doctor_name }}</p>
              <p>Specialization: {{ appointment.doctor_specialization }}</p>
              <p>Date: {{ appointment.appointment_date }} at {{ appointment.appointment_time }}</p>
            </div>
            <div class="w-25">
              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-{{ loop.index }}">
                <i class="fas fa-scroll"></i> Report
              </button>
        
              <!-- Modal -->
              <div class="modal fade" id="modal-{{ loop.index }}" tabindex="-1" aria-labelledby="modal-{{ loop.index }}Label" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="modal-{{ loop.index }}Label">Report for Appointment</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      {{ appointment.report }}
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary">Print</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        
        <div class="col-md-12 col-lg-12 col-xl-12">
          
        </div>
       </div>
      </div>
    </div>
  </div>
</div>
<!-- /Page Content -->
{% endblock %}
